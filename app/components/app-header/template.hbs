<header>
  <div class="title-bar">
    <div class="row columns">
      <div class="title-bar-left">
        <ul class="dropdown menu" data-dropdown-menu>
          <li class="logo">
						{{#link-to 'home'}}<img src="assets/logo.svg">{{/link-to}}          	
          </li>
          <li>
						{{top-bar-search}}
          </li>
        </ul>        
      </div>
      <div class="title-bar-right">
				<ul class="top-bar-group menu menu-actions wrapper" {{ action "closeTooltip" preventDefault=false }}>
					<li>
						{{#zf-tooltip title="Profile Views"}}
							<a data-toggle="dd-views" {{action 'clickProfile' notification.profileCount}}>
								{{#if notification.profileCount}}
									<span class="alert badge">{{notification.profileCount}}</span>
								{{/if}}
								<i class="icons bino"></i>
							</a>
							<div class="wrapper">
								<div class="triangle"></div>
							</div>
						{{/zf-tooltip}}
					</li>

					<li>
						{{#zf-tooltip title="Connection Requests"}}
							<a data-toggle="dd-requests" {{action 'clickConnection' notification.connectionCount}}>
								{{#if notification.connectionCount}}
									<span class="alert badge">{{notification.connectionCount}}</span>
								{{/if}}
								<i class="icons user"></i>
							</a>
							<div class="wrapper">
								<div class="triangle"></div>
							</div>
						{{/zf-tooltip}}
						
					</li>
					<li>
						{{#zf-tooltip title="Messages"}}
							<a data-toggle="dd-messages" {{action 'clickMessage' notification.messageCount}}>
								{{#if notification.messageCount}}
									<span class="alert badge">{{notification.messageCount}}</span>
								{{/if}}
								<i class="icons messages"></i>
							</a>
							<div class="wrapper">
								<div class="triangle"></div>
							</div>
						{{/zf-tooltip}}
						
					</li>
					<li>
						{{#zf-tooltip title="Notifications"}}
							<a data-toggle="dd-notification" {{action 'clickNotification' notification.notificationCount}}>
									{{#if notification.notificationCount }}
							      <span class="alert badge">{{notification.notificationCount}}</span>    
							    {{/if}}
									<i class="icons stack"></i>
							</a>
							<div class="wrapper">
								<div class="triangle"></div>
							</div>							
						{{/zf-tooltip}}
						
					</li>
					<li>
						<ul class="menu user-info">
							<li>
								{{#link-to "me"}}
									<div class="avatar" style={{htmlSafeImage sessionAccount.account.profile.avatarUrl}}>
										<img src= {{sessionAccount.account.profile.avatarUrl}} class="hide">
									</div>								
								{{/link-to}}
							</li>
							<li>
								{{#zf-tooltip title="Menu"}}
									<a data-toggle="dd-menu">
											<i class="icons caret"></i>
									</a>
									<div class="wrapper">
										<div class="triangle"></div>
									</div>

								{{/zf-tooltip}}

								
							</li>
						</ul>

					</li>
				</ul>
      </div>


    </div>
  </div>
</header>

<div class="row columns wrapper">
	{{#zf-dropdown id="dd-views" class="dropdown-menu-barx" closeOnClick=true }}
		<div class="padding profile-view-settings">
			<div class="row collapse">
				<div class="columns">
					<strong>SEE WHO'S VIEWED YOUR PROFILE</strong>
					{{#if setting.profileView}}
						<p>Turning this ON will also let other users know you've seen their profile. You can turn it OFF in {{link-to "Settings" "settings" (query-params tab="views") }}.</p>
					{{else}}
						<p>Turning this ON will also let other users know you've seen their profile. You can turn it ON in {{link-to "Settings" "settings" (query-params tab="views") }}.</p>
					{{/if}}
				</div>
			</div>
		</div>
		<ul class="media-list no-bullet list-lined">
			{{#if setting.profileView}}
				{{#each notification.views as |item|}}
				<li {{action "selectView" item preventDefault=false }}
				class="{{if item.read false 'new-notification'}}">
					<div class="row">
						<div class="columns medium-8">
				      <div class="avatar" style={{htmlSafeImage item.target.profile.avatarUrl }}>
				        <img src= {{item.target.profile.avatarUrl}} class="hide">
				      </div>
				      <div class="user-info">
			          {{item.target.profile.firstName}} {{item.target.profile.lastName}}
				        <div class="position">{{item.title}} at {{item.company}}</div>
				      </div>
							
						</div>
						<div class="columns medium-4">
							{{ timestamp item.createdAt }}
						</div>
					</div>
				</li>
				{{/each}}
			{{else}}
				<li>
					<div class="empty-message">
						You have turned Profile Views off
					</div>
				</li>
			{{/if}}
		</ul>
		{{#if setting.profileView}}
			{{#link-to 'profile-views' class="footer-button button expanded"}}
				SEE ALL PROFILE VIEWS
			{{/link-to}}
		{{/if}}
	{{/zf-dropdown}}

	{{#zf-dropdown id="dd-requests" class="dropdown-menu-bar" closeOnClick=true }}

		<ul class="media-list no-bullet list-lined">
			{{#each notification.requests as |item|}}
			<li class="{{if item.read false 'new-notification'}}">
				<div class="media-object">
					<div class="media-object-section">
						<div class="thumbnail" style={{htmlSafeImage item.target.profile.avatarUrl}}>
							<img src= {{item.target.profile.avatarUrl}} class="hide">
						</div>
					</div>
					<div class="media-object-section main-section">
						<a class="name">{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a>
						<p class="position">
							{{item.target.profile.currentTitle}}<br>
							{{item.target.profile.currentCompany}}
						</p>
					</div>
					<div class="media-object-section actions-section">
	          <a class="button expanded success" {{action "acceptConnection" item preventDefault=false }}>ACCEPT</a>
	          <a class="button expanded default" {{action "rejectConnection" item preventDefault=false }}>DELETE</a>

					</div>
				</div>
			</li>
			{{/each}}
			{{#unless notification.requests }}
			<li>
				<div class="empty-message">No pending connection requests</div>
			</li>
			{{/unless}}
		</ul>
		{{#link-to 'requests' class="footer-button success button expanded"}}
			SEE ALL CONNECTION REQUESTS
		{{/link-to}}
	{{/zf-dropdown}}

	{{#zf-dropdown id="dd-notification" class="dropdown-menu-bar" closeOnClick=true}}

	  <ul class="media-list notifications-list no-bullet list-lined">
	  {{#each notification.notifications as |item|}}
	    <li {{action "select" item preventDefault=false }} 
	    class="{{if item.read false 'new-notification'}}">
	      <div class="media-object">
	        <div class="media-object-section">
	          <div class="thumbnail" style={{htmlSafeImage item.target.profile.avatarUrl}}>
	            <img src={{item.target.profile.avatarUrl}} class="hide">
	          </div>
	        </div>
	        <div class="media-object-section main-section">

	          {{#if (notification-type 'answer' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> answered your question</p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}


	              {{#if (notification-type 'ask' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> asked you a question</p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}

	              {{#if (notification-type 'comment' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> commented your broadcast <a>{{ getNotificationContent item.content }}</a></p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}

	              {{#if (notification-type 'vote' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> upvoted your broadcast <a>{{ getNotificationContent item.content }}</a>  </p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}
	              {{#if (notification-type 'compliment' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> posted a compliment to you </p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}

	              {{#if (notification-type 'accept' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> accepted your request <a>{{ item.content}}</a></p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}


	              {{#if (notification-type 'share' item.type)}}
	                <p><a>{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a> shared your broadcast <a>{{ getNotificationContent item.content }}</a></p>
	                <span>{{ timestamp item.createdAt }}</span>
	              {{/if}}

	        </div>
	      </div>
	    </li>
	  {{/each}}
	  {{#unless notification.notifications }}
	  <li>
	    <div class="empty-message">No new notifications</div>
	  </li>
	  {{/unless}}

	  </ul>



		{{#link-to 'notifications' class="footer-button success button expanded"}}
			SEE ALL NOTIFICATIONS
		{{/link-to}}

	{{/zf-dropdown}}

	{{#zf-dropdown id="dd-messages" class="dropdown-menu-bar" closeOnClick=true }}
		<ul class="media-list no-bullet list-lined">
			{{#each notification.messages as |item|}}
			<li {{action "selectMessage" item preventDefault=false }}
			class="{{if item.read false 'new-notification'}}">
				{{#link-to "messaging.conversation" item.id }}
				<div class="media-object">
					<div class="media-object-section">
						<div class="thumbnail" style={{htmlSafeImage item.target.profile.avatarUrl}}>
							<img src= {{item.target.profile.avatarUrl}} class="hide">
						</div>
					</div>
					<div class="media-object-section main-section">
						<a class="name">{{item.target.profile.firstName}} {{item.target.profile.lastName}}</a>
						<span class="float-right dim-text">{{ timestamp item.createdAt }}</span>
						<p class="position">{{{ getNotificationContent item.content }}}</p>
					</div>
				</div>
				{{/link-to}}
			</li>
			{{/each}}
			{{#unless notification.messages}}
			<li>
				<div class="empty-message">
					You have no recent messages
				</div>
			</li>
			{{/unless}}
		</ul>
		{{#link-to 'messaging' class="footer-button success button expanded"}}
			See All Messages
		{{/link-to}}
	{{/zf-dropdown}}

	{{#zf-dropdown id="dd-menu" class="dropdown-menu-bar" closeOnClick=true}}
		<ul class="menu">
			<li>{{link-to "Home" "home"}}</li>
		</ul>
		<ul class="menu">
			<li>{{link-to "Profile" "me"}}</li>
			<li>{{link-to "Edit Profile" "me.edit"}}</li>
			
		</ul>
		<ul class="menu">
			<li>{{link-to "Connections" "me.connections"}}</li>
			<li>{{link-to "Your ASK Page" "me.ask"}}</li>
			<li>{{link-to "Compliments" "me.compliments"}}</li>
		</ul>
		<ul class="menu">
			<li>{{link-to "People Search" "search"}}</li>
		</ul>
		<ul class="menu">
			<li>{{link-to "Settings" "settings" }}</li>
			<li>{{link-to "User Guide" "user-guide" }}</li>
			<li><a href="" {{action 'logout'}}>Log out</a></li>									
		</ul>
	{{/zf-dropdown}}						

</div>